{
  "swagger": "2.0",
  "info": {
    "title": "OpenBankProject-Transaction-Metadata",
    "description": "An Open Source API for Banks. (c) TESOBE Ltd. 2011 - 2018. Licensed under the AGPL and commercial licences.",
    "contact": {
      "name": "TESOBE Ltd. / Open Bank Project",
      "url": "https://openbankproject.com",
      "email": "contact@tesobe.com"
    },
    "version": "v3_1_0"
  },
  "host": "api.openbankproject.com",
  "basePath": "/obp-transaction-metadata",
  "schemes": [
    "http",
    "https"
  ],
  "securityDefinitions": {
    "directLogin": {
      "type": "apiKey",
      "description": "https://github.com/OpenBankProject/OBP-API/wiki/Direct-Login",
      "in": "header",
      "name": "Authorization"
    },
    "gatewayLogin": {
      "type": "apiKey",
      "description": "https://github.com/OpenBankProject/OBP-API/wiki/Gateway-Login",
      "in": "header",
      "name": "Authorization"
    }
  },
  "security": [
    {
      "directLogin": [],
      "gatewayLogin": []
    }
  ],
  "paths": {
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/comments": {
      "get": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Get comments.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eReturns the transaction TRANSACTION_ID comments made on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e (VIEW_ID).\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-getCommentsForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionCommentsJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Add comment.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003ePosts a comment about a transaction TRANSACTION_ID on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e VIEW_ID.\u003c/p\u003e\u003cp\u003e${authenticationRequiredMessage(false)}\u003c/p\u003e\u003cp\u003eAuthentication is required since the comment is linked with the user.\u003c/p\u003e",
        "operationId": "vv1_2_1-addCommentForViewOnTransaction",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PostTransactionCommentJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionCommentJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/comments/{COMMENT_ID}": {
      "delete": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Delete comment.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eDelete the comment COMMENT_ID about the transaction TRANSACTION_ID made on \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required. The user must either have owner privileges for this account, or must be the user that posted the comment.\u003c/p\u003e",
        "operationId": "vv1_2_1-deleteCommentForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "COMMENT_ID",
            "description": "The comment id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "204": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EmptyClassJson"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorBankAccountNotFound"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/images": {
      "get": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Get images.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eReturns the transaction TRANSACTION_ID images made on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e (VIEW_ID).  Authentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-getImagesForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionImagesJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Add an image.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003ePosts an image about a transaction TRANSACTION_ID on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e VIEW_ID.\u003c/p\u003e\u003cp\u003eAuthentication is Mandatory\u003c/p\u003e\u003cp\u003eThe image is linked with the user.\u003c/p\u003e",
        "operationId": "vv1_2_1-addImageForViewOnTransaction",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PostTransactionImageJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionImageJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorInvalidJsonFormat"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/images/{IMAGE_ID}": {
      "delete": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Delete an image",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eDeletes the image IMAGE_ID about the transaction TRANSACTION_ID made on \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required. The user must either have owner privileges for this account, or must be the user that posted the image.\u003c/p\u003e",
        "operationId": "vv1_2_1-deleteImageForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "IMAGE_ID",
            "description": "The image id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "204": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EmptyClassJson"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorBankAccountNotFound"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/narrative": {
      "delete": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Delete narrative.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eDeletes the description of the transaction TRANSACTION_ID.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-deleteTransactionNarrative",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "204": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EmptyClassJson"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Get narrative.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eReturns the account owner description of the transaction \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003emoderated\u003c/a\u003e by the view.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-getTransactionNarrative",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionNarrativeJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorBankAccountNotFound"
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Add narrative.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eCreates a description of the transaction TRANSACTION_ID.\u003c/p\u003e\u003cp\u003eNote: Unlike other items of metadata, there is only one \"narrative\" per transaction accross all views. If you set narrative via a view e.g. view-x it will be seen via view-y (as long as view-y has permission to see the narrative).\u003c/p\u003e\u003cp\u003eAuthentication is Optional Authentication is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-addTransactionNarrative",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TransactionNarrativeJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SuccessMessage"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorInvalidJsonFormat"
            }
          }
        }
      },
      "put": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Update narrative.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eUpdates the description of the transaction TRANSACTION_ID.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-updateTransactionNarrative",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TransactionNarrativeJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SuccessMessage"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorInvalidJsonFormat"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/tags": {
      "get": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Get tags.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eReturns the transaction TRANSACTION_ID tags made on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e (VIEW_ID).  Authentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-getTagsForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionTagJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorBankAccountNotFound"
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Add a tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003ePosts a tag about a transaction TRANSACTION_ID on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e VIEW_ID.\u003c/p\u003e\u003cp\u003eAuthentication is Mandatory\u003c/p\u003e\u003cp\u003eAuthentication is required as the tag is linked with the user.\u003c/p\u003e",
        "operationId": "vv1_2_1-addTagForViewOnTransaction",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PostTransactionTagJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionTagJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/tags/{TAG_ID}": {
      "delete": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Delete a tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eDeletes the tag TAG_ID about the transaction TRANSACTION_ID made on \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e. Authentication via OAuth is required. The user must either have owner privileges for this account, or must be the user that posted the tag.\u003c/p\u003e",
        "operationId": "vv1_2_1-deleteTagForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TAG_ID",
            "description": "The tag id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "204": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EmptyClassJson"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorNoViewPermission"
            }
          }
        }
      }
    },
    "/obp/v1.2.1/banks/{BANK_ID}/accounts/{ACCOUNT_ID}/{VIEW_ID}/transactions/{TRANSACTION_ID}/metadata/where": {
      "delete": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Delete where tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eDeletes the where tag of the transaction TRANSACTION_ID made on \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAuthentication is Mandatory\u003c/p\u003e\u003cp\u003eThe user must either have owner privileges for this account, or must be the user that posted the geo tag.\u003c/p\u003e",
        "operationId": "vv1_2_1-deleteWhereTagForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "204": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/EmptyClassJson"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      },
      "get": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Get where tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eReturns the \"where\" Geo tag added to the transaction TRANSACTION_ID made on a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e (VIEW_ID). It represents the location where the transaction has been initiated.\u003c/p\u003e\u003cp\u003eAuthentication via OAuth is required if the view is not public.\u003c/p\u003e",
        "operationId": "vv1_2_1-getWhereTagForViewOnTransaction",
        "parameters": [
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/TransactionWhereJSON"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorBankAccountNotFound"
            }
          }
        }
      },
      "post": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Add where tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eCreates a \"where\" Geo tag on a transaction TRANSACTION_ID in a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAuthentication is Mandatory\u003c/p\u003e\u003cp\u003eThe geo tag is linked with the user.\u003c/p\u003e",
        "operationId": "vv1_2_1-addWhereTagForViewOnTransaction",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PostTransactionWhereJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "201": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SuccessMessage"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      },
      "put": {
        "tags": [
          "Transaction-Metadata"
        ],
        "summary": "Update where tag.",
        "security": [
          {
            "directLogin": [],
            "gatewayLogin": []
          }
        ],
        "description": "\u003cp\u003eUpdates the \"where\" Geo tag on a transaction TRANSACTION_ID in a \u003ca href\u003d\"#1_2_1-getViewsForBankAccount\"\u003eview\u003c/a\u003e.\u003c/p\u003e\u003cp\u003eAuthentication is Mandatory\u003c/p\u003e\u003cp\u003eThe geo tag is linked with the user.\u003c/p\u003e",
        "operationId": "vv1_2_1-updateWhereTagForViewOnTransaction",
        "parameters": [
          {
            "in": "body",
            "name": "body",
            "description": "BANK_BODY",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PostTransactionWhereJSON"
            }
          },
          {
            "in": "path",
            "name": "TRANSACTION_ID",
            "description": "The transaction id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "VIEW_ID",
            "description": "The view id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "ACCOUNT_ID",
            "description": "The account id",
            "required": true,
            "type": "string"
          },
          {
            "in": "path",
            "name": "BANK_ID",
            "description": "The bank id",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "$ref": "#/definitions/SuccessMessage"
            }
          },
          "400": {
            "description": "Error",
            "schema": {
              "$ref": "#/definitions/ErrorUserNotLoggedIn"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "TransactionCommentsJSON": {
      "required": [
        "comments"
      ],
      "properties": {
        "comments": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TransactionCommentJSON"
          }
        }
      }
    },
    "TransactionCommentJSON": {
      "required": [
        "id",
        "value",
        "date",
        "user"
      ],
      "properties": {
        "user": {
          "$ref": "#/definitions/UserJSONV121"
        },
        "date": {
          "type": "string",
          "format": "date",
          "example": "Tue Sep 19 00:00:00 UTC 2017"
        },
        "value": {
          "type": "string",
          "example": "OBP"
        },
        "id": {
          "type": "string",
          "example": "5995d6a2-01b3-423c-a173-5481df49bdaf"
        }
      }
    },
    "UserJSONV121": {
      "required": [
        "id",
        "provider",
        "display_name"
      ],
      "properties": {
        "display_name": {
          "type": "string",
          "example": "OBP"
        },
        "provider": {
          "type": "string",
          "example": "OBP"
        },
        "id": {
          "type": "string",
          "example": "5995d6a2-01b3-423c-a173-5481df49bdaf"
        }
      }
    },
    "ErrorUserNotLoggedIn": {
      "properties": {
        "message": {
          "type": "string",
          "example": "OBP-20001: User not logged in. Authentication is required!"
        }
      }
    },
    "PostTransactionCommentJSON": {
      "required": [
        "value"
      ],
      "properties": {
        "value": {
          "type": "string",
          "example": "String"
        }
      }
    },
    "EmptyClassJson": {
      "required": [
        "jsonString"
      ],
      "properties": {
        "jsonString": {
          "type": "string",
          "example": "{}"
        }
      }
    },
    "ErrorBankAccountNotFound": {
      "properties": {
        "message": {
          "type": "string",
          "example": "OBP-30018: Bank Account not found. Please specify valid values for BANK_ID and ACCOUNT_ID. "
        }
      }
    },
    "TransactionImagesJSON": {
      "required": [
        "images"
      ],
      "properties": {
        "images": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/TransactionImageJSON"
          }
        }
      }
    },
    "TransactionImageJSON": {
      "required": [
        "id",
        "label",
        "URL",
        "date",
        "user"
      ],
      "properties": {
        "URL": {
          "type": "string",
          "example": "www.openbankproject.com"
        },
        "label": {
          "type": "string",
          "example": "NONE"
        },
        "id": {
          "type": "string",
          "example": "5995d6a2-01b3-423c-a173-5481df49bdaf"
        },
        "date": {
          "type": "string",
          "format": "date",
          "example": "Tue Sep 19 00:00:00 UTC 2017"
        },
        "user": {
          "$ref": "#/definitions/UserJSONV121"
        }
      }
    },
    "PostTransactionImageJSON": {
      "required": [
        "label",
        "URL"
      ],
      "properties": {
        "URL": {
          "type": "string",
          "example": "String"
        },
        "label": {
          "type": "string",
          "example": "String"
        }
      }
    },
    "ErrorInvalidJsonFormat": {
      "properties": {
        "message": {
          "type": "string",
          "example": "OBP-10001: Incorrect json format."
        }
      }
    },
    "TransactionNarrativeJSON": {
      "required": [
        "narrative"
      ],
      "properties": {
        "narrative": {
          "type": "string",
          "example": "narative"
        }
      }
    },
    "SuccessMessage": {
      "required": [
        "success"
      ],
      "properties": {
        "success": {
          "type": "string",
          "example": "Success"
        }
      }
    },
    "TransactionTagJSON": {
      "required": [
        "id",
        "value",
        "date",
        "user"
      ],
      "properties": {
        "user": {
          "$ref": "#/definitions/UserJSONV121"
        },
        "date": {
          "type": "string",
          "format": "date",
          "example": "Tue Sep 19 00:00:00 UTC 2017"
        },
        "value": {
          "type": "string",
          "example": "OBP"
        },
        "id": {
          "type": "string",
          "example": "5995d6a2-01b3-423c-a173-5481df49bdaf"
        }
      }
    },
    "PostTransactionTagJSON": {
      "required": [
        "value"
      ],
      "properties": {
        "value": {
          "type": "string",
          "example": "String"
        }
      }
    },
    "ErrorNoViewPermission": {
      "properties": {
        "message": {
          "type": "string",
          "example": "OBP-30022: The current view does not have the permission: "
        }
      }
    },
    "TransactionWhereJSON": {
      "required": [
        "where"
      ],
      "properties": {
        "where": {
          "$ref": "#/definitions/LocationJSONV121"
        }
      }
    },
    "LocationJSONV121": {
      "required": [
        "latitude",
        "longitude",
        "date",
        "user"
      ],
      "properties": {
        "user": {
          "$ref": "#/definitions/UserJSONV121"
        },
        "date": {
          "type": "string",
          "format": "date",
          "example": "Tue Sep 19 00:00:00 UTC 2017"
        },
        "longitude": {
          "type": "number",
          "format": "double",
          "example": "1.231"
        },
        "latitude": {
          "type": "number",
          "format": "double",
          "example": "1.231"
        }
      }
    },
    "PostTransactionWhereJSON": {
      "required": [
        "where"
      ],
      "properties": {
        "where": {
          "$ref": "#/definitions/LocationPlainJSON"
        }
      }
    },
    "LocationPlainJSON": {
      "required": [
        "latitude",
        "longitude"
      ],
      "properties": {
        "longitude": {
          "type": "number",
          "format": "double",
          "example": "1.535"
        },
        "latitude": {
          "type": "number",
          "format": "double",
          "example": "1.532"
        }
      }
    }
  }
}